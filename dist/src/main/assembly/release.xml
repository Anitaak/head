<assembly xmlns="http://maven.apache.org/plugins/maven-assembly-plugin/assembly/1.1.0"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://maven.apache.org/plugins/maven-assembly-plugin/assembly/1.1.0 http://maven.apache.org/xsd/assembly-1.1.0.xsd">
    <id>release</id>
    <formats>
        <format>zip</format>
        <format>tar.gz</format>
    </formats>
    <dependencySets>
    	<dependencySet>
    		<outputDirectory>.</outputDirectory>
    		<outputFileNameMapping>${artifact.artifactId}.${artifact.extension}</outputFileNameMapping>
    		<useStrictFiltering>true</useStrictFiltering>
    		<useProjectArtifact>false</useProjectArtifact>
    	</dependencySet>
    </dependencySets>
    <fileSets>
		<fileSet>
			<directory>src/main/dist</directory>
			<outputDirectory />
			<fileMode>0644</fileMode>
			<directoryMode>0755</directoryMode>
			<excludes>
				<exclude>bin/</exclude>
			</excludes>
		</fileSet>
    	<fileSet>
    		<directory>src/main/dist/bin</directory>
    		<outputDirectory>bin</outputDirectory>
    		<fileMode>0755</fileMode>
    		<directoryMode>0755</directoryMode>
    		<excludes>
    			<exclude>*dev*</exclude>
    		</excludes>
    	</fileSet>
        <fileSet>
            <outputDirectory/>
            <directory>${basedir}/..</directory>
            <includes>
                <include>LICENSE*</include>
                <include>INSTALL*</include>
            </includes>
        </fileSet>
        <fileSet>
            <outputDirectory>db</outputDirectory>
            <directory>${basedir}/../db/target/release/db</directory>
        </fileSet>
    </fileSets>
    <files>
        <file>
            <source>${basedir}/../appdomain/target/applicationConfiguration.custom.properties</source>
            <outputDirectory>config</outputDirectory>
        </file>
        <file>
        	<source>target/mifos.exe</source>
        	<outputDirectory>bin</outputDirectory>
        </file>
        <file>
        	<source>target/mifos-cli.exe</source>
        	<outputDirectory>bin</outputDirectory>
        </file>
    </files>
</assembly>
