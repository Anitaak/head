### Contents ### 

* Getting started on the project 
* Mifos Installation
* Developer Notes 


------------------------------
Getting Started on the project 
------------------------------
This is the README file for Mifos, the universal Open Source platform for Microfinance Institutions (MFIs). 


Getting Started with Mifos 
The file InstallMifos provides detailed instructions for building and installing the Mifos software. 


Developer Resources 
1. Code Repository 

Access to the code repository is via cvs pserver anonymous, see MIFOSCVSCheckout 

2. Mailing List 

Signup info and archives for the mifos-developer mailing list can be found at 

https://lists.sourceforge.net/lists/listinfo/mifos-developer 

3. Web Resources 

The Project Home Page can be found at 

http://mifos.dev.java.net 

The Project Wiki can be found at 

http://wiki.java.net/bin/view/Javatools/MIFOS 

4. Coding Standards (TBD) 

http://java.sun.com/docs/codeconv/html/CodeConvTOC.doc.html 

5. Testing environment 
http://test.mifos.org:8080/Mifos 
Login user is "mifos", password is "mifos" 


6. Project Contacts 

James Dailey (grameentechie AT sourceforge.net) 



------------------
Mifos Installation
------------------

Mifos is currently provided as a source distribution, via CVS or as
code snapshots, both available via java.net.

Overview
--------

Since this document is bundled with the source distribution, it is
assumed you already have the code. In addition to obtaining the code,
there are several steps to getting a working Mifos build on your local
machine:

1. Obtain the prerequisite software
2. Install the prerequisite software
3. Set up the environment
4. Create a Mifos server instance under JBoss
5. Install the mifos database
6. Build the software
7. Deploy Mifos
8. Start Mifos
9. Stopping Mifos
10. Securing Mifos

If you only want to deploy Mifos without doing the build, then these instructions will be overkill. 

Detailed Instructions
---------------------

1. Obtain the prerequisite software. You will need the following
   packages and minimum release levels:

       Java 2 Standard Edition SDK 5.0
       MySQL 4.1.16
       JBoss 4.0.3SP1
       Apache Ant 1.6.5
       Cobertura 1.7
       JUnit 3.8.1

Note that Apache Ant 1.6.5 and Cobertura are both available in the CVS 
in the softwares\ directory.  Note that Java, mySQL, and JBOSS are required for the deployment. 

2. Install the prerequisite software.

   Follow the instructions provided with each package. 


Note: Try not to install the packages in non-standard locations, and on *nix and OS X, try to avoid install directories with spaces, for obvious reasons. /opt (on *nix and OS X) and C:\ (on Windows) are probably safe places.

See wiki page http://wiki.java.net/bin/view/Javatools/WindowsUsingCygwin for notes on getting up and running on windows with cygwin.  


JBoss and MySQL on Windows choose "Program Files" as the default location on Windows; this does not seem to cause problems. MySQL may require a custom installation in order to choose a non-standard location.

You have been warned.

3. Set up the Environment.

   The following environment variables need to be defined to your
   shell, system environment, or IDE, so that Ant and JBoss will be
   able to locate the necessary resources at build and run time:

   
JAVA_HOME	The location of your JDK install
JBOSS_HOME	The location of your JBoss install
ANT_HOME	The location of your Ant install
COBERTURA_HOME	The location of your Cobertural install
PATH	Ensure that JAVA_HOME/bin, JBOSS_HOME/bin, and ANT_HOME/bin are in your path or visible to your IDE, if you choose to build and debug in something like Eclipse or NetBeans.


   It's often convenient to have these set from a script.

4. Create a Mifos server instance under JBoss

   We will use the 'default' configuration that comes with the JBoss
   distribution as our template. Make a copy of
   $JBOSS_HOME/server/default and its contents to
   $JBOSS_HOME/server/Mifos. On *nix:

       cp -pr $JBOSS_HOME/server/default $JBOSS_HOME/server/Mifos

   Be sure that a full copy of default is made, and not a symbolic
   link, as this can have undesirable consequences. On Windows,
   perform a copy operation of $JBOSS_HOME/server/default in Windows
   Explorer, renaming it to $JBOSS_HOME/server/Mifos.

   Next, copy the MySQL driver and create the datasource configuration
   required for JBoss. The file lib/mysql-connector-java-3.1.7-bin.jar 
   (which lives under DevSpace/Workspace) should be copied to 
   $JBOSS_HOME/server/Mifos/lib.

   Create a file called $JBOSS_HOME/server/Mifos/deploy/mysql-ds.xml
   with the following content:

        <?xml version="1.0" encoding="UTF-8"?>
        <datasources>
          <local-tx-datasource>
            <jndi-name>MifosDatasource</jndi-name>
            <connection-url>
                 jdbc:mysql://localhost:3306/mifos
            </connection-url>
            <driver-class>com.mysql.jdbc.Driver</driver-class>
            <user-name>mifos</user-name>
            <password>mifos</password>
            <exception-sorter-class-name>
         org.jboss.resource.adapter.jdbc.vendor.MySQLExceptionSorter
            </exception-sorter-class-name>
            <metadata>
              <type-mapping>mySQL</type-mapping>
            </metadata>
          </local-tx-datasource>
        </datasources>


   The mifos database user password can be changed as necessary. Be
   sure to change the password used in Step 5. below.

5. Install the mifos database

   You can use the ant target 'build_db' to install the mifos
   database. You can also perform the steps manually:

       Start a mysql session: 

           mysql -u root -p

       Execute the following sequence of commands in the mysql client:

           drop database if exists mifos
           create database mifos
           grant all privileges on mifos.* to mifos identified by 'mifos'  
           \. sql/mifosdbcreationscript.sql
           \. sql/mifosmasterdata.sql 

if you issue the above one by one, you need to issue 
mySQL> use mifos ;

6. Build the software

   Invoke the build:

       ant

   or invoke ant from your IDE. The default build target will produce
   a runnable Mifos war.  To see a list of useful build targets we've
   pre-defined, invoke ant with the -p switch.

  if ant fail at "build_test_db" task, verify that  "testdb.user" 
  and "testdb.pwd" is  correctly specified in "build.properties" 
  under "conf" folder of mifos as per your Mysql environment


Note: if you get an error from ant that it cannot create the junit task in the run_test target, you may need to follow this tip.

7. Deploy Mifos

   copy dist/Mifos.war to $JBOSS_HOME/server/Mifos/deploy

8. Start Mifos

   Start JBoss, specifying 'Mifos' as the server configuration. For
   example:

       $JBOSS_HOME/bin/run.sh -c Mifos

or, on Windows:
       $JBOSS_HOME/bin/run.bat  –c Mifos

Now, time to try it out!  You should be able to go to:
      http://localhost:8080/Mifos

9. Stopping Mifos

   Stop JBoss as described in the JBoss documentation, with CTRL-C at
   the console, or using the shutdown scripts provided with the JBoss
   distribution.

10. Securing Mifos

   The default install of JBoss exposes a JMX management
   console. Consult the JBoss documentation for steps on how to secure
   the management facility.

(twong)






---------------
Developer Notes
---------------
 
There are various folders containing the java source files developed in Milestone 1 (M1) and being developed in Milestone 2(M2).The 2 milestones are following 2 different approaches in development. 

Further, in Milestone 2 - hereafter M2 code - there are multiple iterations, typically every two weeks.  Also, in M2 there are jUnit tests that should cover all business objects.  The aim is to migrate to M2 style code throughout, so the developer is warned to check with the listserv before developing on top of soon to be deprecated code.  Generally speaking, code that calls upon handlers and makes calls to separate DAO (data action objects) or that lacks the ending BO on objects is M1 code.  

Again, M1 code is soon to be deprecated (note made May 2006).  


Here is how you can tell the difference between the design approaches:  

M1 – Taking the example of an account module - The business logic is present inside the business processors specific to the module like account(hence there is an account business processor), the attributes are present in value objects(account value object). To perform a specific functionality like create/update etc the value object is populated with the relevant information and passed to the relavant method in the account business processor. The business processor performs business logic using these value objects and then invokes the corresponding Dao(account dao) passing this value object. The value object is saved using hibernate in the Dao.

 

M2 – Taking the example of an account module -  Accounts object contain the attributes relevant to them and also have the behavior on these attributes. It also contains the relavant associations to other account objects. To perform a specific functionality, the account object gets retrieved through hibernate and then the corresponding functionality is invoked on the account object. The account object performs the specific functionality and invokes the account persistence service passing itself to be saved in the database.

The various directories under which the code for M1 & M2 are present 

src/org/mifos/application 

- this directory contains the different application modules that are implemented in MIFOS, 
the source code for M1 and M2 are present under this directory under the respective modules. 

 

src/org/mifos/application/accounts

- this directory contains the folders where-in the source code(M1 & M2) for the accounts module is present. The accounts folder also contains savings, loan and financial transaction classes.

 

src/org/mifos/application/accounts/struts

- this directory contains the folders which contain code for struts related classes for the account module in M1 & M2

 

src/org/mifos/application/accounts/struts/action

- this folder contains the struts action classes for handeling the account functionality. Struts action classes written in M1 
and M2 are present in this folder.  The action classes written in M1 would have their class extending from MifosBaseAction. The action classes written in M2 would have their class extending from BaseAction.
 

src/org/mifos/application/accounts/struts/actionforms

- this folder contains the struts action forms for the account module written in M1 & M2.

 

src/org/mifos/application/accounts/business

- this folder contains the various account related objects being used in M2.

 

src/org/mifos/application/accounts/business/service

- this folder contains the account business service being used in M2 .

 

src/org/mifos/application/accounts/business/handlers

- this folder contains the account related business processors used in M1 . The business processor contains the business 
logic to handle account functionality developed during M1. 

 

src/org/mifos/application/accounts/persistence

- this folder contains the persistent classes being used in M2. The persistent classes contain the hibernate code for 
retrival , saving of account objects being used in M2. 

 

src/org/mifos/application/accounts/persistence/service

- this folder contains the account persistent service methods being used in M2 .

 

src/org/mifos/application/accounts/dao

- this folder contains the account related dao used in M1. The dao contain the hibernate code for  retrival , saving of 
account objects developed during M1. 

 

src/org/mifos/application/accounts/util/valueobjects

- this folder contains the value objects(containing data) for accounts used in M1.

 

src/org/mifos/application/accounts/exceptions

- this folder contains the account exception classes being used in M1 & M2.

 

src/org/mifos/application/accounts/util/helpers

- this folder contains helper classes used for accounts in M1 & M2.

 

src/org/mifos/application/accounts/util/resources

- this folder contains resource file used for accounts in M1 & M2.

 

src/org/mifos/application/accounts/loan

- this directory  has the same structure as defined for accounts , this directory contains classes written in M1 and M2 to 
handle loan functionality 

 

src/org/mifos/application/accounts/savings

- this directory contains classes written in M2 to handle savings functionality 

 

src/org/mifos/application/accounts/financial

- this directory contains classes written in M2 to handle accounting functionality 

 

 

src/org/mifos/application/bulkentry

- this directory contains folders which have classes written in M2 to handle bulkentry functionality

 

src/org/mifos/application/collectionsheet

- this directory contains folders which have classes written in M2 to handle collectionsheet functionality

 

 

Other modules defined under src/org/mifos/application contain folders having classes written in M1 and M2 , the structure is 
the same as defined above for accounts module

 

src/org/mifos/framework/business

- this folder contains the framework classes written for  M2

 

src/org/mifos/framework/business/service

- this folder contains the framework classes written for  M2

 

src/org/mifos/framework/persistence

- this folder contains the framework classes written for  M2

 

src/org/mifos/framework/business/handlers

- this folder contains the framework classes written for  M1

 

src/org/mifos/framework/business/util/helpers

- this folder contains the framework classes written for M1

 

src/org/mifos/framework/dao

- this folder contains the framework classes written for  M1

 

src/org/mifos/framework/struts

- this folder contains the framework classes written for M1 & M2

 

src/org/mifos/framework/exceptions

- this folder contains the framework classes written for M1 & M2

 

src/org/mifos/framework/hibernate

- this folder contains the framework classes written for M1 & M2

 

src/org/mifos/framework/security

- this folder contains the framework classes written for M1 & M2

 

src/org/mifos/framework/components

- this folder contains the component classes written for M1 & M2


rmp
- this folder contains the reporting mini portal source written for Mifos Reporting


The test directory under root contains the unit test casses written in M2 , it follows the directory structure like src.

