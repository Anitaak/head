<?xml version="1.0" encoding='UTF-8'?>
<!DOCTYPE hibernate-mapping PUBLIC
                            "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
                            "http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd" >


<hibernate-mapping>

    <class name="org.mifos.application.master.util.valueobjects.AccountState" table="ACCOUNT_STATE">
        <id name="accountStateId" column="ACCOUNT_STATE_ID" type="short">
            <generator class="native"/>
        </id>
 
        <property name="prdTypeId" column="PRD_TYPE_ID" type="short"  not-null="true" />
        <property name="lookUpId" column="LOOKUP_ID" type="integer"  not-null="true" />
        <property name="currentlyInUse" column="CURRENTLY_IN_USE" type="short"  not-null="true" />
 
        
 
        
    </class>
    <!--Gets the mandatory states based on the value in CURRENTLY_IN_USE column-->
    <query name="accounts.getMandatoryStates"><![CDATA[from AccountState accountState where accountState.currentlyInUse = 1 and accountState.prdTypeId = :prdTypeId]]></query>
    <!--Gets all possible states-->
    <query name="accounts.getAllAccountStates"><![CDATA[from AccountState accountState where  accountState.prdTypeId = :prdTypeId]]></query>
    
     <query name="masterdata.accountstatus">
		<![CDATA[select new org.mifos.application.master.util.valueobjects.StatusMaster(status.accountStateId, lookUp.lookUpValue)  from org.mifos.application.master.util.valueobjects.AccountState status, org.mifos.application.master.util.valueobjects.LookUpValueLocale lookUp where status.lookUpId = lookUp.lookUpId and lookUp.localeId=:localeId  and status.prdTypeId=:prdTypeId]]>
	 </query>
    
</hibernate-mapping>
