<?xml version="1.0" encoding='UTF-8'?>
<!DOCTYPE hibernate-mapping PUBLIC
                            "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
                            "http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd" >


<hibernate-mapping>

    <class name="org.mifos.application.customer.util.valueobjects.CustomerLevel" table="CUSTOMER_LEVEL">
        <id name="levelId" column="LEVEL_ID" type="short">
            <generator class="native"/>
        </id>
 
        <property name="interactionFlag" column="INTERACTION_FLAG" type="short" />
        <property name="maxChildCount" column="MAX_CHILD_COUNT" type="short"  not-null="true" />
        <property name="maxInstanceCount" column="MAX_INSTANCE_COUNT" type="short"  not-null="true" />
 
        <many-to-one name="parentCustomerLevel" column="PARENT_LEVEL_ID" class="org.mifos.application.customer.util.valueobjects.CustomerLevel" />
 
        <many-to-one name="lookUpEntity" column="LEVEL_NAME_ID" class="org.mifos.application.master.util.valueobjects.LookUpEntity"  not-null="true" />
 
     </class>
     <query name="getParentLevel">
        <![CDATA[select level.parentCustomerLevel.levelId from org.mifos.application.customer.util.valueobjects.CustomerLevel level where level.levelId = :levelId ]]>
     </query>
     
    
</hibernate-mapping>
