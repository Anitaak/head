<?xml version="1.0" encoding='UTF-8'?>
<!DOCTYPE hibernate-mapping PUBLIC
                            "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
                            "http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd" >


<hibernate-mapping>

	<class
		name="org.mifos.application.office.util.valueobjects.OfficeHierarchy"
		table="OFFICE_HIERARCHY">
		<id name="hierarchyId" column="HIERARCHY_ID" type="integer">
			<generator class="native" />
		</id>
		<property name="startDate" column="START_DATE" type="date"></property>
		<property name="endDate" column="END_DATE" type="date"></property>
		<property name="updatedDate" column="UPDATED_DATE"
			type="date">
		</property>
        <property name="updatedBy" column="UPDATED_BY"></property>  
        <property name="status" column="STATUS" ></property> 
 
		<many-to-one name="office"
			class="org.mifos.application.office.util.valueobjects.Office"
			column="OFFICE_ID" unique="true" insert="true" update="true" lazy="true" cascade="none">
		</many-to-one>
		<many-to-one name="parentOffice"
			class="org.mifos.application.office.util.valueobjects.Office"
			column="PARENT_ID" unique="true" insert="true"
			update="true" lazy="true" cascade="none">
		</many-to-one>
<!-- 		
		<many-to-one name="status"
			class="org.mifos.application.office.util.valueobjects.OfficeStatus"
			column="STATUS" unique="true" insert="true" update="true" lazy="true" cascade="none">
		</many-to-one>
-->
<!-- 
		<many-to-one name="updatedBy"
			class="org.mifos.application.personnel.util.valueobjects.Personnel"
			column="UPDATED_BY" unique="true" insert="true" update="true" lazy="true" cascade="none">
		</many-to-one>
-->		
	</class>
    <query name="getOldHierarchy">
            <![CDATA[ from org.mifos.application.office.util.valueobjects.OfficeHierarchy oh where oh.office.officeId=:officeId and oh.status=:statusId]]>
    </query>
</hibernate-mapping>