<?xml version="1.0" encoding='UTF-8'?>
<!DOCTYPE hibernate-mapping PUBLIC
                            "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
                            "http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd" >

<hibernate-mapping>

    <class name="org.mifos.application.fees.util.valueobjects.FeeLevel" table="FEELEVEL">
        <id name="feeLevelId" column="FEELEVEL_ID" type="short">
            <generator class="native"/>
        </id>
 
        <property name="levelId" column="LEVEL_ID"  />
        <many-to-one name="feeId" column="FEE_ID" class="org.mifos.application.fees.util.valueobjects.Fees" cascade="all" insert="true" />
    </class>
	
	<!-- This query obtains all the active administrative fees assigned to a particular level. -->
    <query name="masterdata.feelevel">

    <![CDATA[select new org.mifos.application.fees.util.valueobjects.FeeMaster(fees.feeId,fees.feeName,fees.rateOrAmount,fees.globalFeeNum,fees.versionNo,fees.feeFrequency.feeFrequencyTypeId,fees.feeFrequency.feeMeetingFrequency.meetingId) from org.mifos.application.fees.util.valueobjects.Fees as fees, org.mifos.application.fees.util.valueobjects.FeeFrequency as feeFrequency, org.mifos.application.fees.util.valueobjects.FeeLevel as feelevel where fees.feeId = feelevel.feeId and feelevel.levelId = :levelId and fees.status=:statusId and feeFrequency.fee.feeId=fees.feeId]]></query>
    
</hibernate-mapping>
