<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE struts-config PUBLIC "-//Apache Software Foundation//DTD Struts Configuration 1.2//EN"
"http://jakarta.apache.org/struts/dtdt/struts-config_1_2.dtd">
<struts-config>
	<form-beans>
			<form-bean name="genericActionForm" type="org.mifos.framework.struts.actionforms.GenericActionForm"/>
			<form-bean name="questionActionForm" type="org.mifos.application.surveys.struts.actionforms.QuestionActionForm"/>
			<form-bean name="surveyInstanceActionForm" type="org.mifos.application.surveys.struts.actionforms.SurveyInstanceActionForm"/>			
	</form-beans>
	<global-exceptions>
		<exception type="org.mifos.framework.exceptions.SystemException" handler="org.mifos.framework.exceptions.MifosExceptionHandler" key="exception.framework.SystemException" scope="request" path="/pages/framework/jsp/error.jsp" />
		<exception type="org.mifos.framework.exceptions.ApplicationException" handler="org.mifos.framework.exceptions.MifosExceptionHandler" key="exception.framework.ApplicationException" scope="request" />
		<exception type="org.mifos.framework.exceptions.PageExpiredException" handler="org.mifos.framework.exceptions.MifosExceptionHandler" key="exception.framework.PageExpiredException" scope="request" path="/pages/framework/jsp/pageexpirederror.jsp" />
		<exception type="org.mifos.framework.exceptions.ConnectionNotFoundException" handler="org.mifos.framework.exceptions.MifosExceptionHandler" key="exception.framework.ConnectionNotFoundException" scope="request" path="/pages/framework/jsp/error.jsp" />
		<exception type="org.mifos.framework.exceptions.ServiceUnavailableException" handler="org.mifos.framework.exceptions.MifosExceptionHandler" key="exception.framework.ServiceUnavailableException" scope="request" path="/pages/framework/jsp/error.jsp" />
	</global-exceptions>
	<global-forwards>
		<forward name="welcome" path="/loginAction.do?method=load" />
		<forward name="load_main_page" path="/pages/application/login/jsp/login.jsp"></forward>
	</global-forwards>
	
	<action-mappings>
		<action path="/surveysAction"
   	      type="org.mifos.application.surveys.struts.action.SurveysAction"
   	      parameter="method"
   	      scope="session"
   	      validate="true"
   	      name="genericActionForm"
   	      input="/surveysAction.do?method=create_entry">
   	         <forward name="load_main_page" path="/pages/application/surveys/jsp/mainpage.jsp"/>
   	         <forward name="get_success" path="/pages/application/surveys/jsp/survey_details.jsp"/>
   	         <forward name="create_entry_success" path="/pages/application/surveys/jsp/create_survey.jsp"/>   	         
			 <forward name="preview_success" path="/pages/application/surveys/jsp/survey_preview.jsp"/>   	            	         
			 <forward name="create_success" path="/pages/application/surveys/jsp/create_survey_success.jsp"/>		 
			 <forward name="print_success" path="/pages/application/surveys/jsp/printer_version.jsp"/>
   	    </action>
  	    
   	    <action path="/questionsAction"
          type="org.mifos.application.surveys.struts.action.QuestionsAction"
          parameter="method"
          scope="session"
          validate="false"
          name="genericActionForm"
          input="/questionsAction.do?method=validate">
             <forward name="viewAll_success" path="/pages/application/surveys/jsp/view_questions.jsp"/>
             <forward name="load_success" path="/pages/application/surveys/jsp/define_questions.jsp"/>
             <forward name="get_success" path="/pages/application/surveys/jsp/question_details.jsp"/>
             <forward name="edit_success" path="/pages/application/surveys/jsp/edit_question.jsp"/>
             <forward name="update_success" path="/pages/application/surveys/jsp/question_details.jsp"/>
             <forward name="preview_success" path="/pages/application/surveys/jsp/preview_question.jsp"/>
             
        </action>
        
        <action path="/surveyInstanceAction"
          type="org.mifos.application.surveys.struts.action.SurveyInstanceAction"
          parameter="method"
          scope="session"
          validate="true"
          name="genericActionForm"
          input="/surveyInstanceAction.do?method=validate">
          	  <forward name="create_success" path="/AdminAction.do?method=load" redirect="true"/>
          	  <forward name="create_entry_success_ppi" path="/pages/application/surveys/jsp/create_ppi_instance.jsp"/>
          	  <forward name="create_entry_success" path="/pages/application/surveys/jsp/create_instance.jsp"/>
          	  <forward name="preview_failure" path="/pages/application/surveys/jsp/create_instance.jsp"/>
          	  <forward name="preview_success_ppi" path="/pages/application/surveys/jsp/preview_ppi_instance.jsp"/>
          	  <forward name="preview_success" path="/pages/application/surveys/jsp/preview_instance.jsp"/>
          	  <forward name="get_success" path="/pages/application/surveys/jsp/viewInstanceDetails.jsp"/>          	  
          	  <forward name="get_success_ppi" path="/pages/application/surveys/jsp/viewPPIInstanceDetails.jsp"/>          	  
          	  <forward name="choose_survey" path="/pages/application/surveys/jsp/create_instance_choosesurvey.jsp"/>          	            	  
        </action>
        <action path="/ppiAction"
          type="org.mifos.application.ppi.struts.action.PPIAction"
          parameter="method"
          scope="session"
          validate="false"
          name="genericActionForm">
             <forward name="configure" path="/pages/application/ppi/jsp/configure.jsp"/>
             <forward name="preview_success" path="/pages/application/ppi/jsp/preview.jsp"/>
             <forward name="update_success" path="/AdminAction.do?method=load" redirect="true"/>
        </action>
	</action-mappings>
	<plug-in className="org.apache.struts.validator.ValidatorPlugIn">
		<set-property property="pathnames" value="/WEB-INF/validation.xml,/WEB-INF/validator-rules.xml" />
		<set-property property="stopOnFirstError" value="false" />
	</plug-in>
</struts-config>