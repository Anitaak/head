<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE struts-config PUBLIC "-//Apache Software Foundation//DTD Struts Configuration 1.2//EN"
"http://jakarta.apache.org/struts/dtdt/struts-config_1_2.dtd">


<struts-config>
	<form-beans>
		<!-- Moratorium module -->
		<form-bean name="moratoriumActionForm" type="org.mifos.application.moratorium.struts.actionforms.MoratoriumActionForm"></form-bean>		
	</form-beans>
	
	<global-exceptions>
		<exception type="org.mifos.framework.exceptions.SystemException" 
			handler="org.mifos.framework.exceptions.MifosExceptionHandler" 
			key="exception.framework.SystemException" 
			scope="request" 
			path="/pages/framework/jsp/error.jsp" />
		<exception type="org.mifos.framework.exceptions.ApplicationException" 
			handler="org.mifos.framework.exceptions.MifosExceptionHandler" 
			key="exception.framework.ApplicationException" 
			scope="request" />
		<exception type="org.mifos.framework.exceptions.PageExpiredException" 
			handler="org.mifos.framework.exceptions.MifosExceptionHandler" 
			key="exception.framework.PageExpiredException" 
			scope="request" 
			path="/pages/framework/jsp/pageexpirederror.jsp"/>
		<exception type="org.mifos.framework.exceptions.ConnectionNotFoundException" 
			handler="org.mifos.framework.exceptions.MifosExceptionHandler" 
			key="exception.framework.ConnectionNotFoundException" 
			scope="request" path="/pages/framework/jsp/error.jsp" />
		<exception type="org.mifos.framework.exceptions.ServiceUnavailableException" 
			handler="org.mifos.framework.exceptions.MifosExceptionHandler" 
			key="exception.framework.ServiceUnavailableException" 
			scope="request" path="/pages/framework/jsp/error.jsp" />		
	</global-exceptions>

	<global-forwards>
		<forward name="welcome" path="/loginAction.do?method=load" />
		<forward name="load_main_page" path="/pages/application/login/jsp/login.jsp"></forward>
	</global-forwards>
	
	<action-mappings>
		<action path="/custSearchAction" type="org.mifos.application.customer.struts.action.CustSearchAction"
  			name="custSearchActionForm"
       		parameter="method"
       		scope="session">
       		<forward name="loadSearch_success" 	path="/pages/application/customer/jsp/cust_search_account.jsp"/>
      		<forward name="search_success" 	path="/pages/application/customer/jsp/cust_search_account_results.jsp"/>
        	<forward name="search_failure" 	path="/pages/application/customer/jsp/cust_search_account.jsp"/>
 			<forward name="load_success" path="/pages/application/customer/jsp/clients_accounts.jsp" />
			<forward name="load_branch" path="/pages/application/customer/jsp/branch_search_loanofficer.jsp" />
			<forward name="load_loanofficer" path="/pages/application/customer/jsp/branch_search.jsp" />
			<forward name="mainSearch_success" path="/pages/application/customer/jsp/search_result.jsp" />
			<forward name="mainSearch_failure" path="/pages/application/customer/jsp/search_result.jsp" />
			<forward name="getHomePage_success" path="/pages/application/customer/jsp/home.jsp" />
			<forward name="loadallbranches_success" path="/custSearchAction.do?method=mainSearch" />
			<forward name="moratorium_search_success" 	path="/pages/application/moratorium/jsp/moratoriumSearchResults.jsp"/>
    	</action>
    
    	<action path="/moratoriumAction"
          type="org.mifos.application.moratorium.struts.action.MoratoriumAction"
          parameter="method"
          scope="session"
          validate="true"
          input="/moratoriumAction.do?method=validate" 
          name="moratoriumActionForm">
             <forward name="configure" path="/pages/application/moratorium/jsp/configureMoratorium.jsp"/>
             <forward name="loadSearch" path="/pages/application/moratorium/jsp/configureClientMoratorium.jsp"/>             
             <forward name="loadSearchForBranch" path="/pages/application/moratorium/jsp/configureBranchMoratorium.jsp"/>
             <forward name="load" path="/pages/application/moratorium/jsp/applyMoratorium.jsp"/>
             <forward name="loadForBranch" path="/pages/application/moratorium/jsp/applyMoratoriumForBranch.jsp"/>
             <forward name="create" path="/pages/application/moratorium/jsp/applyMoratoriumConfirm.jsp"/>
             <forward name="createForBranch" path="/pages/application/moratorium/jsp/applyBranchMoratoriumConfirm.jsp"/>             
             <forward name="previewCreateMoratorium_failure" path="/pages/application/moratorium/jsp/applyMoratorium.jsp"/>
             <forward name="previewCreateBranchMoratorium_failure" path="/pages/application/moratorium/jsp/applyMoratoriumForBranch.jsp"/>
             <forward name="get_success" path="/pages/application/moratorium/jsp/viewMoratoriums.jsp"/>
             <forward name="edit_success" path="/pages/application/moratorium/jsp/editMoratoriums.jsp"/>
             <forward name="editpreview_success" path="/pages/application/moratorium/jsp/editMoratoriumsPreview.jsp"/>
             <forward name="update_success" path="/moratoriumAction.do?method=get"/>
             <forward name="editPreviewMoratorium_failure" path="/pages/application/moratorium/jsp/editMoratoriums.jsp"/>
             <forward name="create_success" path="/AdminAction.do?method=load"></forward>
             <forward name="previous_success" path="/pages/application/moratorium/jsp/applyMoratorium.jsp"></forward>
             <forward name="previous_success_for_branch" path="/pages/application/moratorium/jsp/applyMoratoriumForBranch.jsp"></forward>
             <forward name="edit_previous_success" path="/pages/application/moratorium/jsp/editMoratoriums.jsp"></forward>
        </action>		
	</action-mappings>
	
	<!-- Moratorium resources -->
    <message-resources key="moratoriumUIResources" parameter="org.mifos.application.moratorium.util.resources.MoratoriumUIResources" factory="org.mifos.framework.struts.tags.MifosPropertyMessageResourcesFactory" />
	
	<plug-in className="org.apache.struts.validator.ValidatorPlugIn">
		<set-property property="pathnames" value="org/mifos/application/moratorium/validation.xml,org/mifos/application/moratorium/validator-rules.xml" />
		<set-property property="stopOnFirstError" value="false" />
	</plug-in>
</struts-config>
